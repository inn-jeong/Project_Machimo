<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="/login/jquery.min.js"></script>
    <script type="text/javascript">
        function sendRequest(){
            var u_id = $("#u_id").val();
            console.log("u_id"+u_id);
            $.ajax({
                url:"/loginT/checkMember"
                ,type:"POST"
                ,data:{"u_id":u_id}
// 			dataType: 생략 가능(생략하면 자동으로 데이터타입 처리)
// 			,dataType: "json"
                ,dataType: "text"
                //data: 응답받는 것(ex>json, text 등)
                ,success: function(data) {
                    if (data == "confirm") {
                        console.log(data);
                        $("#check_result").css("color","blue");
                        // document.getElementById("check_result").innerHTML = "사용가능";
                        document.getElementById("check_result").innerHTML = "사용가능";
                        document.getElementById("check_btn").disabled = true;
                        document.getElementById("insert_mem").disabled = false;
                        document.getElementById("insert_mem").enabled = true;
                    }else{
                        console.log(data);
                        $("#check_result").css("color","red");
                        document.getElementById("check_result").innerHTML = "사용불가";
                        document.getElementById("insert_mem").disabled = true;
                    }
                }
                ,error:function(data){
                    document.getElementById("check_result").innerHTML = "<h3>ajax fail</h3>";
                }
            });
        }
        $(function(){
            var naver_Mem = $("#naverMem").val();
        });
    </script>
</head>
<body>
<input type="hidden" id="naverMem" th:value="${naverMem}">
<input type="hidden" id="kakaoMem" th:value="${kakaoMem}">
<form name="reg_frm" method="post" action="/loginT/joinProc">
  <table border="1" align="center">
    <tr height="50">
      <td colspan="2" align="center">
        <h1>회원 가입 신청</h1>
      </td>
    </tr>
    <tr height="30">
      <td width="80">User ID</td>
      <td>
<!--        <div th:if="${userDto == null}"><input name="u_id" type="text" size="20"></div>-->
<!--        <div th:unless="${userDto != null}"><input name="u_id" type="text" th:value="${userDto.getU_id()}" size="20"></div>-->
        <input name="u_id" id="u_id" type="text" th:value="${userDto.getU_id()}" size="20">
          <button type="button" id="check_btn" onclick="sendRequest()">중복 체크</button>
          <span id="check_result"></span>
          <span th:text="${valid_u_id}"></span>

      </td>
    </tr>
    <tr height="30">
      <td width="80">암    호</td>
      <td>
        <input name="u_password" type="password" size="20">*
          <span th:text="${valid_u_password}"></span>
      </td>
    </tr>
    <!-- 			<tr height="30"> -->
    <!-- 				<td width="80">암호 확인</td> -->
    <!-- 				<td> -->
    <!-- 					<input name="pwd_check" type="password" size="20">* -->
    <!-- 				</td> -->
    <!-- 			</tr> -->
    <tr height="30">
      <td width="80">이   름</td>
      <td>
        <input name="u_name" type="text" th:value="${userDto.getU_name()}" size="20">*
<!--        <input name="u_name" type="text" size="20">*-->
          <span th:text="${valid_u_name}"></span>
      </td>
    </tr>
      <tr height="30">
          <td width="80">생년월일</td>
          <td>
              <input name="u_jumin" type="text" th:value="${userDto.getU_jumin()}" size="20">*
              <span th:text="${valid_u_jumin}"></span>
          </td>
      </tr>
      <tr height="30">
          <td width="80">전화번호</td>
          <td>
              <input name="u_phone" type="text" th:value="${userDto.getU_phone()}" size="20">*
              <span th:text="${valid_u_phone}"></span>
          </td>
      </tr>
      <tr height="30">
          <td width="80">닉네임</td>
          <td>
              <input name="u_nickname" type="text" th:value="${userDto.getU_nickname()}" size="20">*
              <span th:text="${valid_u_nickname}"></span>
          </td>
      </tr>
    <tr height="30">
        <td width="80">E-mail</td>
        <td>
            <input name="u_email" type="text" th:value="${userDto.getU_email()}" size="30">*
            <span th:text="${valid_u_email}"></span>
        </td>
    </tr>
    <tr height="30">
        <td width="80">주    소</td>
        <td>
            <input name="u_address" type="text" th:value="${userDto.getU_address()}" size="40">
        </td>
    </tr>
    <tr height="30">
      <td width="80" colspan="2" align="center">
        <input type="submit" id="insert_mem" value="등록">
        <!-- 					<input type="button" value="등록" onclick="check_OK();"> -->
        <!-- 					<input type="reset" value="다시입력"> -->
        <!-- 					<input type="button" value="가입안함" onclick="javascript:window.location='login.jsp'"> -->
      </td>
    </tr>
  </table>
  </form>
</body>
</html>