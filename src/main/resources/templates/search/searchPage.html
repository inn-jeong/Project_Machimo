<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous">

</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


<body>
<th:block th:replace="fragments/header :: headerFragment"></th:block>
<h1 th:text="${message}"></h1>

<h1 th:text="${option}"></h1>
<h1> 옵션의 값은 위에 적혀 있음</h1>
<div th:each="result:${search}">
    <span th:text="${result.pInfo()}"></span>
    <span th:text="${result.pInfo()}"></span>
    <span th:text="${result.pInfo()}"></span>
    <span th:text="${result.pInfo()}"></span>
    <span th:text="${result.pName()}"></span>
</div>

<div class="div_page">
    <ul>

        <th:block th:if="${pageMaker.prev}">


            <li class="paginate_button">
                <a th:href="${pageMaker.startPage+1}">
                    [Previous]
                </a>

            </li>
        </th:block>
        <th:block th:each="num :${#numbers.sequence(pageMaker.startPage,pageMaker.endPage)}">

            <li class="paginate_button" th:style="${pageMaker.cri.pageNum == num ? 'background-color: yellow' : ''}">
                <a th:href="${num}">
                    <h1 th:text="${num}" ></h1>
                </a>
            </li>

        </th:block>
    </ul>
    <th:block th:if="${pageMaker.next}">
        <a th:href="${pageMaker.endPage+1}">
            [Next]
        </a>
    </th:block>
</div>
<span id="option" hidden="hidden" th:text="${option}"></span>
<form method="get" id="actionForm" action="searchList">
    <input type="hidden" name="pageNum" th:value="${pageMaker.cri.pageNum}">
    <input type="hidden" name="amount" th:value="${pageMaker.cri.amount}">
    <input type="hidden" name="keyword" th:value="${message}">
    <input type="hidden" name="searchOption" th:value="${option}">
</form>

<th:block th:replace="fragments/footer :: footerFragment"></th:block>
</body>
</html>
<script>
    var actionForm = $("#actionForm");
    var option = $("#option").val();
    /////////////////페이지번호 처리/////////////////
    $(".paginate_button a").on("click", function (e){

        // 기본 동작 막음: 페이지 링크를 통해서 이동
        e.preventDefault();
        console.log("click~!");
        console.log("@# href ===>"+$(this).attr("href"));
        actionForm.find("input[name='pageNum']").val($(this).attr("href"));

        actionForm.submit();
    });
    /////////////////게시글 처리/////////////////

</script>