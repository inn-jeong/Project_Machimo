<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.project_machimo.login.Dao.LoginDao">
    <insert id="memberInsert" parameterType="hashmap">
        insert into users(USER_ID,U_CREATED_AT,U_EMAIL,U_PASSWORD,U_NAME,U_PHONE,U_ADDRESS,U_ID,U_JUMIN,U_NICKNAME) values
        ((select nvl(max(user_id),0) from users)+1,
                sysdate,#{u_email},#{u_password},
                #{u_name},#{u_phone},
                #{u_address},#{u_id},
                #{u_jumin},#{u_nickname})
    </insert>

<!--    <select id="loginYn" resultType="com.example.project_machimo.login.Dto.LoginDto">-->
<!--        select u_id,u_password,u_name from users where u_id=#{u_id}-->
<!--    </select>-->

    <select id="findMem" resultType="com.example.project_machimo.login.Dto.MemDto">
        select user_id,u_id,u_password,
                u_name,u_jumin,u_email,
                u_phone,u_address,
                u_nickname,u_point,
                u_created_at,u_updated_at,
                u_signout from users where u_id=#{u_id}
    </select>
    <select id="findMemPhone" resultType="com.example.project_machimo.login.Dto.MemDto">
        select * from users where u_phone = #{u_phone}
    </select>
    <select id="findMemEmail" resultType="com.example.project_machimo.login.Dto.MemDto">
        select * from users where u_email = #{u_email}
    </select>
</mapper>